<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Basics</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<div class="code">
<span class="comment">(**********************************************************************)</span><br/>
<span class="comment">(*&nbsp;Equations&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Copyright&nbsp;(c)&nbsp;2009-2017&nbsp;Matthieu&nbsp;Sozeau&nbsp;&lt;matthieu.sozeau@inria.fr&gt;&nbsp;*)</span><br/>
<span class="comment">(**********************************************************************)</span><br/>
<span class="comment">(*&nbsp;This&nbsp;file&nbsp;is&nbsp;distributed&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;GNU&nbsp;Lesser&nbsp;General&nbsp;Public&nbsp;License&nbsp;Version&nbsp;2.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
<span class="comment">(**********************************************************************)</span><br/>
</div>

<div class="doc">
<a name="lab1"></a><h1 class="section">Basic examples</h1>


<div class="paragraph"> </div>

  This file containts various examples demonstrating the features of Equations.
  If running this interactively you can ignore the printing
  and hide directives which are just used to instruct coqdoc. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Program.html#"><span class="id" title="library">Program</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Bool.Bvector.html#"><span class="id" title="library">Bvector</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relations.html#"><span class="id" title="library">Relations</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="keyword">Equations</span> <span class="id" title="library">Signature</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8.html#"><span class="id" title="library">Utf8</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">DepElimDec</span>.<br/>

<br/>
</div>

<div class="doc">
Just pattern-matching 
</div>
<div class="code">
<span class="id" title="keyword">Equations</span> <a name="neg"><span class="id" title="definition">neg</span></a> (<span class="id" title="var">b</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
<a class="idref" href="Basics.html#neg"><span class="id" title="definition">neg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ;<br/>
<a class="idref" href="Basics.html#neg"><span class="id" title="definition">neg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>

<br/>
</div>

<div class="doc">
A proof using the functional elimination principle derived for <span class="inlinecode"><a class="idref" href="Basics.html#neg"><span class="id" title="definition">neg</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="neg_inv"><span class="id" title="lemma">neg_inv</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <a class="idref" href="Basics.html#neg"><span class="id" title="definition">neg</span></a> (<a class="idref" href="Basics.html#neg"><span class="id" title="definition">neg</span></a> <a class="idref" href="Basics.html#b"><span class="id" title="variable">b</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#b"><span class="id" title="variable">b</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>. <span class="id" title="var">funelim</span> (<a class="idref" href="Basics.html#neg"><span class="id" title="definition">neg</span></a> <span class="id" title="var">b</span>); <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Obligations</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">idtac</span>.<br/>

<br/>
</div>

<div class="doc">
One can use equations just like program, putting underscores <span class="inlinecode"><span class="id" title="var">_</span></span> for
      obligations to be filled separately. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a name="Obligations.f"><span class="id" title="definition">f</span></a> (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#f"><span class="id" title="definition">f</span></a> 0 := 42 ;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#f"><span class="id" title="definition">f</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>) <span class="id" title="keyword">with</span> <a class="idref" href="Basics.html#f"><span class="id" title="definition">f</span></a> <span class="id" title="var">m</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Basics.html#f"><span class="id" title="definition">f</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>) <span class="id" title="var">IH</span> := <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="keyword">Obligations</span>.<br/>

<br/>
</div>

<div class="doc">
Structural recursion and use of the <span class="inlinecode"><span class="id" title="keyword">with</span></span> feature to look at the result
    of a recursive call (here with a trivial pattern-matching. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">List</span>.<br/>
<span class="id" title="keyword">Equations</span> <a name="app_with"><span class="id" title="definition">app_with</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Basics.html#app_with"><span class="id" title="definition">app_with</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">l</span> := <span class="id" title="var">l</span> ;<br/>
<a class="idref" href="Basics.html#app_with"><span class="id" title="definition">app_with</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) <span class="id" title="var">l</span> ≤ <a class="idref" href="Basics.html#app_with"><span class="id" title="definition">app_with</span></a> <span class="id" title="var">v</span> <span class="id" title="var">l</span> ⇒ {<br/>
&nbsp;&nbsp;| <span class="id" title="var">vl</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">vl</span> }.<br/>

<br/>
</div>

<div class="doc">
Structurally recursive function on natural numbers, with inspection of a recursive
    call result. We use <span class="inlinecode"><span class="id" title="tactic">auto</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode"><span class="id" title="var">arith</span></span> to discharge the obligations. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">program_simpl</span> ; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="equal"><span class="id" title="definition">equal</span></a> (<span class="id" title="var">n</span> <span class="id" title="var">m</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#32263a1c8b01baecdff9deb038955bc9"><span class="id" title="notation">≠</span></a> <span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> :=<br/>
<a class="idref" href="Basics.html#equal"><span class="id" title="definition">equal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Utils.html#in_left"><span class="id" title="abbreviation">in_left</span></a> ;<br/>
<a class="idref" href="Basics.html#equal"><span class="id" title="definition">equal</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>) ≤ <a class="idref" href="Basics.html#equal"><span class="id" title="definition">equal</span></a> <span class="id" title="var">n</span> <span class="id" title="var">m</span> ⇒ {<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#equal"><span class="id" title="definition">equal</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#left"><span class="id" title="constructor">left</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> ;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#equal"><span class="id" title="definition">equal</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Specif.html#right"><span class="id" title="constructor">right</span></a> <span class="id" title="var">p</span>) := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Utils.html#in_right"><span class="id" title="abbreviation">in_right</span></a> } ;<br/>
<a class="idref" href="Basics.html#equal"><span class="id" title="definition">equal</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Utils.html#in_right"><span class="id" title="abbreviation">in_right</span></a>.<br/>

<br/>
</div>

<div class="doc">
Pattern-matching on the indexed equality type. 
</div>
<div class="code">
<span class="id" title="keyword">Equations</span> <a name="eq_sym"><span class="id" title="definition">eq_sym</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">H</span> : <a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#y"><span class="id" title="variable">y</span></a>) : <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span> :=<br/>
<a class="idref" href="Basics.html#eq_sym"><span class="id" title="definition">eq_sym</span></a> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="eq_trans"><span class="id" title="definition">eq_trans</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">p</span> : <a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#y"><span class="id" title="variable">y</span></a>) (<span class="id" title="var">q</span> : <a class="idref" href="Basics.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#z"><span class="id" title="variable">z</span></a>) : <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">z</span> :=<br/>
<a class="idref" href="Basics.html#eq_trans"><span class="id" title="definition">eq_trans</span></a> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="KAxiom"><span class="id" title="module">KAxiom</span></a>.<br/>

<br/>
</div>

<div class="doc">
By default we allow the K axiom, but it can be unset. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Equations</span> <span class="id" title="var">WithK</span>.<br/>

<br/>
</div>

<div class="doc">
In this case the following definition fails as <span class="inlinecode"><a class="idref" href="Basics.html#KAxiom.K"><span class="id" title="definition">K</span></a></span> is not derivable on type <span class="inlinecode"><a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="keyword">Equations</span> <a name="KAxiom.K"><span class="id" title="definition">K</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">x</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">P</span> : <a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<span class="id" title="var">p</span> : <a class="idref" href="Basics.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>) (<span class="id" title="var">H</span> : <a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a>) : <span class="id" title="var">P</span> <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Basics.html#K"><span class="id" title="definition">K</span></a> <span class="id" title="var">x</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> := <span class="id" title="var">p</span>.<br/>

<br/>
</div>

<div class="doc">
However, types enjoying a provable instance of the <span class="inlinecode"><a class="idref" href="Basics.html#KAxiom.K"><span class="id" title="definition">K</span></a></span> axiom are fine. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a name="KAxiom.K"><span class="id" title="definition">K</span></a> (<span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">P</span> : <a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<span class="id" title="var">p</span> : <a class="idref" href="Basics.html#P"><span class="id" title="variable">P</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>) (<span class="id" title="var">H</span> : <a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a>) : <span class="id" title="var">P</span> <span class="id" title="var">H</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Basics.html#K"><span class="id" title="definition">K</span></a> <span class="id" title="var">x</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> := <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Print</span> <span class="id" title="keyword">Assumptions</span> <a class="idref" href="Basics.html#KAxiom.K"><span class="id" title="definition">K</span></a>. <span class="comment">(*&nbsp;Closed&nbsp;under&nbsp;the&nbsp;global&nbsp;context&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Basics.html#KAxiom"><span class="id" title="module">KAxiom</span></a>.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><span class="id" title="keyword">with</span></span> construct allows to pattern-match on an intermediary computation.
    The "|" syntax provides a shortcut to repeating the previous patterns. 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a name="FilterDef"><span class="id" title="section">FilterDef</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a name="filter"><span class="id" title="definition">filter</span></a> (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#FilterDef.A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#FilterDef.A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#filter"><span class="id" title="definition">filter</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">l</span>) ≤ <a class="idref" href="Basics.html#FilterDef.p"><span class="id" title="variable">p</span></a> <span class="id" title="var">a</span> ⇒ {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> := <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="Basics.html#filter"><span class="id" title="definition">filter</span></a> <span class="id" title="var">l</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> := <a class="idref" href="Basics.html#filter"><span class="id" title="definition">filter</span></a> <span class="id" title="var">l</span> }.<br/>

<br/>
</div>

<div class="doc">
By default, equations makes definitions opaque after definition,
      to avoid spurious unfoldings, but this can be reverted on a case by case
      basis, or using the global <span class="inlinecode"><span class="id" title="keyword">Set</span></span> <span class="inlinecode"><span class="id" title="keyword">Equations</span></span> <span class="inlinecode"><span class="id" title="keyword">Transparent</span></span> option. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Global Transparent</span> <a class="idref" href="Basics.html#filter"><span class="id" title="definition">filter</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Basics.html#FilterDef"><span class="id" title="section">FilterDef</span></a>.<br/>

<br/>
</div>

<div class="doc">
We define inclusion of a list in another one, to specify the behavior of <span class="inlinecode"><a class="idref" href="Basics.html#filter"><span class="id" title="definition">filter</span></a></span> 
</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <a name="incl"><span class="id" title="inductive">incl</span></a> {<span class="id" title="var">A</span>} : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Relations.Relation_Definitions.html#relation"><span class="id" title="definition">relation</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<a name="stop"><span class="id" title="constructor">stop</span></a> : <a class="idref" href="Basics.html#incl"><span class="id" title="inductive">incl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <br/>
| <a name="keep"><span class="id" title="constructor">keep</span></a> {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">xs</span> <span class="id" title="var">ys</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span>} : <a class="idref" href="Basics.html#incl"><span class="id" title="inductive">incl</span></a> <a class="idref" href="Basics.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="Basics.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#incl"><span class="id" title="inductive">incl</span></a> (<a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="Basics.html#xs"><span class="id" title="variable">xs</span></a>) (<a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="Basics.html#ys"><span class="id" title="variable">ys</span></a>)<br/>
| <a name="skip"><span class="id" title="constructor">skip</span></a> {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">xs</span> <span class="id" title="var">ys</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span>} : <a class="idref" href="Basics.html#incl"><span class="id" title="inductive">incl</span></a> <a class="idref" href="Basics.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="Basics.html#ys"><span class="id" title="variable">ys</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#incl"><span class="id" title="inductive">incl</span></a> (<a class="idref" href="Basics.html#xs"><span class="id" title="variable">xs</span></a>) (<a class="idref" href="Basics.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <a class="idref" href="Basics.html#ys"><span class="id" title="variable">ys</span></a>).<br/>

<br/>
</div>

<div class="doc">
Using <span class="inlinecode"><span class="id" title="keyword">with</span></span> again, we can produce a proof that the filtered list is a
    sublist of the original list. 
</div>
<div class="code">
<span class="id" title="keyword">Equations</span> <a name="sublist"><span class="id" title="definition">sublist</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<span class="id" title="var">xs</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="Basics.html#incl"><span class="id" title="inductive">incl</span></a> (<a class="idref" href="Basics.html#filter"><span class="id" title="definition">filter</span></a> <span class="id" title="var">p</span> <span class="id" title="var">xs</span>) <span class="id" title="var">xs</span> :=<br/>
<a class="idref" href="Basics.html#sublist"><span class="id" title="definition">sublist</span></a> <span class="id" title="var">p</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="Basics.html#stop"><span class="id" title="constructor">stop</span></a> ;<br/>
<a class="idref" href="Basics.html#sublist"><span class="id" title="definition">sublist</span></a> <span class="id" title="var">p</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">x</span> <span class="id" title="var">xs</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span> := {<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> := <a class="idref" href="Basics.html#keep"><span class="id" title="constructor">keep</span></a> (<a class="idref" href="Basics.html#sublist"><span class="id" title="definition">sublist</span></a> <span class="id" title="var">p</span> <span class="id" title="var">xs</span>) ;<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> := <a class="idref" href="Basics.html#skip"><span class="id" title="constructor">skip</span></a> (<a class="idref" href="Basics.html#sublist"><span class="id" title="definition">sublist</span></a> <span class="id" title="var">p</span> <span class="id" title="var">xs</span>) }.<br/>

<br/>
</div>

<div class="doc">
Well-founded definitions: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Arith.Arith.html#"><span class="id" title="library">Arith</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Arith.Wf_nat.html#"><span class="id" title="library">Wf_nat</span></a>.<br/>

<br/>
</div>

<div class="doc">
One can declare new well-founded relations using instances of the <span class="inlinecode"><span class="id" title="class">WellFounded</span></span> typeclass. 
</div>
<div class="code">
<span class="id" title="keyword">Instance</span> <a name="wf_nat"><span class="id" title="instance">wf_nat</span></a> : <span class="id" title="class">WellFounded</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Arith.Wf_nat.html#lt_wf"><span class="id" title="lemma">lt_wf</span></a>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">lt_n_Sn</span> : <span class="id" title="var">lt</span>.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><span class="id" title="tactic">by</span></span> <span class="inlinecode"><span class="id" title="var">rec</span></span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a></span> annotation indicates the kind of well-founded recursion we want. 
</div>
<div class="code">
<span class="id" title="keyword">Equations</span> <a name="testn"><span class="id" title="definition">testn</span></a> (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
<a class="idref" href="Basics.html#testn"><span class="id" title="definition">testn</span></a> <span class="id" title="var">n</span> <span class="id" title="tactic">by</span> <span class="id" title="var">rec</span> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#lt"><span class="id" title="definition">lt</span></a> :=<br/>
<a class="idref" href="Basics.html#testn"><span class="id" title="definition">testn</span></a> 0 := 0 ;<br/>
<a class="idref" href="Basics.html#testn"><span class="id" title="definition">testn</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) ≤ <a class="idref" href="Basics.html#testn_comp_proj"><span class="id" title="definition">testn</span></a> <span class="id" title="var">n</span> ⇒ {<br/>
&nbsp;&nbsp;| 0 := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> 0 ;<br/>
&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span>) := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span> }.<br/>

<br/>
</div>

<div class="doc">
Notations for vectors 
</div>
<div class="code">
<span class="id" title="var">Arguments</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">Vector.nil</span></a> {<span class="id" title="var">A</span>}.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">Vector.cons</span></a> {<span class="id" title="var">A</span>} <span class="id" title="var">_</span> {<span class="id" title="var">n</span>}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="f50e0c3a0efb93a1b7a7772561ce252b"><span class="id" title="notation">&quot;</span></a> x |:| y " := (@<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">Vector.cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">vect_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a name="d1bfc5cf4a2dee3c0565dba482f34d23"><span class="id" title="notation">&quot;</span></a> x |: n :| y " := (@<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">Vector.cons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">n</span> <span class="id" title="var">y</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">vect_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> <a name="10e9005784c912eb036d433ad923509e"><span class="id" title="notation">&quot;</span></a>[]v" := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">Vector.nil</span></a> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0) : <span class="id" title="var">vect_scope</span>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">vect_scope</span>.<br/>

<br/>
</div>

<div class="doc">
We can define functions by structural recursion on indexed datatypes like vectors. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a name="vapp"><span class="id" title="definition">vapp</span></a> {<span class="id" title="var">A</span>} {<span class="id" title="var">n</span> <span class="id" title="var">m</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) (<span class="id" title="var">w</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">A</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">m</span>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#vapp"><span class="id" title="definition">vapp</span></a> <a class="idref" href="Basics.html#10e9005784c912eb036d433ad923509e"><span class="id" title="notation">[]</span></a><a class="idref" href="Basics.html#10e9005784c912eb036d433ad923509e"><span class="id" title="notation">v</span></a> <span class="id" title="var">w</span> := <span class="id" title="var">w</span> ;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#vapp"><span class="id" title="definition">vapp</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">Vector.cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>) <span class="id" title="var">w</span> := <span class="id" title="var">a</span> <a class="idref" href="Basics.html#f50e0c3a0efb93a1b7a7772561ce252b"><span class="id" title="notation">|:|</span></a> <a class="idref" href="Basics.html#vapp"><span class="id" title="definition">vapp</span></a> <span class="id" title="var">v</span> <span class="id" title="var">w</span>.<br/>

<br/>
</div>

<div class="doc">
We can also support well-founded recursion on indexed datatypes. 
</div>
<div class="code">

<br/>
<span class="id" title="var">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">EqDec</span>.<br/>

<br/>
</div>

<div class="doc">
We show that decidable equality of the elements type implied decidable equality of vectors. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Instance</span> <a name="vector_eqdec"><span class="id" title="instance">vector_eqdec</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">n</span>} `(<span class="id" title="class">EqDec</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) : <span class="id" title="class">EqDec</span> (<span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">left</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">y</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">eq_dec</span> <span class="id" title="var">h</span> <span class="id" title="var">h0</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHx</span> <span class="id" title="var">y</span>). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">left</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>. <span class="id" title="var">simpdep</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">right</span>. <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>. <span class="id" title="var">simpdep</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We automatically derive the signature and subterm relation for
    vectors and prove it's well-foundedness. The signature provides
    a <span class="inlinecode"><span class="id" title="method">signature_pack</span></span> function to pack a vector with its index. The
    well-founded relation is defined on the packed vector type. 
</div>
<div class="code">

<br/>
<span class="id" title="var">Derive</span> <span class="id" title="var">Signature</span> <span class="id" title="var">Subterm</span> <span class="id" title="keyword">for</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#t"><span class="id" title="inductive">vector</span></a>.<br/>

<br/>
</div>

<div class="doc">
The relation is actually called <span class="inlinecode"><a class="idref" href="Basics.html#t_subterm"><span class="id" title="definition">t_subterm</span></a></span> as <span class="inlinecode"><span class="id" title="abbreviation">vector</span></span> is just
    a notation for <span class="inlinecode"><span class="id" title="var">Vector.t</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="foo"><span class="id" title="section">foo</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
</div>

<div class="doc">
We can use the packed relation to do well-founded recursion on the vector.
      Note that we do a recursive call on a substerm of type <span class="inlinecode"><span class="id" title="abbreviation">vector</span></span> <span class="inlinecode"><a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> which
      must be shown smaller than a <span class="inlinecode"><span class="id" title="abbreviation">vector</span></span> <span class="inlinecode"><a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode">(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a></span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)</span>. They are actually compared
      at the packed type <span class="inlinecode">{</span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><span class="id" title="abbreviation">vector</span></span> <span class="inlinecode"><a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a></span> <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>}</span>. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a name="unzip"><span class="id" title="definition">unzip</span></a> {<span class="id" title="var">n</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> (<a class="idref" href="Basics.html#foo.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Basics.html#foo.B"><span class="id" title="variable">B</span></a>) <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#foo.A"><span class="id" title="variable">A</span></a> <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#foo.B"><span class="id" title="variable">B</span></a> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#unzip"><span class="id" title="definition">unzip</span></a> <span class="id" title="var">v</span> <span class="id" title="tactic">by</span> <span class="id" title="var">rec</span> (<span class="id" title="method">signature_pack</span> <span class="id" title="var">v</span>) (@<a class="idref" href="Basics.html#t_subterm"><span class="id" title="definition">t_subterm</span></a> (<a class="idref" href="Basics.html#foo.A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#d19c7eafd0e2d195d10df94b392087b5"><span class="id" title="notation">×</span></a> <a class="idref" href="Basics.html#foo.B"><span class="id" title="variable">B</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#unzip"><span class="id" title="definition">unzip</span></a> <a class="idref" href="Basics.html#10e9005784c912eb036d433ad923509e"><span class="id" title="notation">[]</span></a><a class="idref" href="Basics.html#10e9005784c912eb036d433ad923509e"><span class="id" title="notation">v</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="Basics.html#10e9005784c912eb036d433ad923509e"><span class="id" title="notation">[]</span></a><a class="idref" href="Basics.html#10e9005784c912eb036d433ad923509e"><span class="id" title="notation">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="Basics.html#10e9005784c912eb036d433ad923509e"><span class="id" title="notation">[]</span></a><a class="idref" href="Basics.html#10e9005784c912eb036d433ad923509e"><span class="id" title="notation">v</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> ;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#unzip"><span class="id" title="definition">unzip</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">Vector.cons</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">n</span> <span class="id" title="var">v</span>) <span class="id" title="keyword">with</span> <a class="idref" href="Basics.html#unzip_comp_proj"><span class="id" title="definition">unzip</span></a> <span class="id" title="var">v</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <span class="id" title="var">xs</span> <span class="id" title="var">ys</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">Vector.cons</span></a> <span class="id" title="var">x</span> <span class="id" title="var">xs</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">Vector.cons</span></a> <span class="id" title="var">y</span> <span class="id" title="var">ys</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#44400027531d4bc3f586a1997dc874c0"><span class="id" title="notation">)</span></a> }.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Basics.html#foo"><span class="id" title="section">foo</span></a>.<br/>

<br/>
</div>

<div class="doc">
Playing with lists and functional induction, we define a tail-recursive version
    of <span class="inlinecode"><a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a></span> and show its equivalence with the "naïve" <span class="inlinecode"><a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a name="app"><span class="id" title="definition">app</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Basics.html#app"><span class="id" title="definition">app</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">l</span> := <span class="id" title="var">l</span>;<br/>
<a class="idref" href="Basics.html#app"><span class="id" title="definition">app</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) <span class="id" title="var">l</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> (<a class="idref" href="Basics.html#app"><span class="id" title="definition">app</span></a> <span class="id" title="var">v</span> <span class="id" title="var">l</span>).<br/>

<br/>
<span class="id" title="keyword">Infix</span> <a name="5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">&quot;</span></a>++" := <a class="idref" href="Basics.html#app"><span class="id" title="definition">app</span></a> (<span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 60) : <span class="id" title="var">list_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="rev_acc"><span class="id" title="definition">rev_acc</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">acc</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Basics.html#rev_acc"><span class="id" title="definition">rev_acc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">acc</span> := <span class="id" title="var">acc</span>;<br/>
<a class="idref" href="Basics.html#rev_acc"><span class="id" title="definition">rev_acc</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) <span class="id" title="var">acc</span> := <a class="idref" href="Basics.html#rev_acc"><span class="id" title="definition">rev_acc</span></a> <span class="id" title="var">v</span> (<span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#0a8150c3c4df34d205c5ed9a427e2ed5"><span class="id" title="notation">::</span></a> <span class="id" title="var">acc</span>).<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="rev"><span class="id" title="definition">rev</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>;<br/>
<a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) := <a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">v</span> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="af522e7bcd6f546a086933f85f4775b4"><span class="id" title="notation">&quot;</span></a> [] " := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Lists.List.html#nil"><span class="id" title="abbreviation">List.nil</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="app_nil"><span class="id" title="lemma">app_nil</span></a> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>), <a class="idref" href="Basics.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="Basics.html#af522e7bcd6f546a086933f85f4775b4"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#l"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Basics.html#app"><span class="id" title="definition">app</span></a> <span class="id" title="var">l</span> <a class="idref" href="Basics.html#af522e7bcd6f546a086933f85f4775b4"><span class="id" title="notation">[]</span></a>); <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="app_assoc"><span class="id" title="lemma">app_assoc</span></a> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">l''</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>), <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><a class="idref" href="Basics.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="Basics.html#l'"><span class="id" title="variable">l'</span></a><a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="Basics.html#l''"><span class="id" title="variable">l''</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">(</span></a><a class="idref" href="Basics.html#l'"><span class="id" title="variable">l'</span></a> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="Basics.html#l''"><span class="id" title="variable">l''</span></a><a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">revert</span> <span class="id" title="var">l''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<span class="id" title="var">l</span> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">l'</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">simp</span> <span class="id" title="var">app</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rev_rev_acc"><span class="id" title="lemma">rev_rev_acc</span></a> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>), <a class="idref" href="Basics.html#rev_acc"><span class="id" title="definition">rev_acc</span></a> <a class="idref" href="Basics.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="Basics.html#af522e7bcd6f546a086933f85f4775b4"><span class="id" title="notation">[]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="Basics.html#l"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="Basics.html#af522e7bcd6f546a086933f85f4775b4"><span class="id" title="notation">[]</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Basics.html#app_nil"><span class="id" title="lemma">app_nil</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (@<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l'</span>. <span class="id" title="var">simp</span> <span class="id" title="var">rev_acc</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Basics.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Rewrite</span> @<a class="idref" href="Basics.html#rev_rev_acc"><span class="id" title="lemma">rev_rev_acc</span></a> : <span class="id" title="var">rev_acc</span>.<br/>
<span class="id" title="keyword">Hint Rewrite</span> @<a class="idref" href="Basics.html#app_nil"><span class="id" title="lemma">app_nil</span></a> @<a class="idref" href="Basics.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> : <span class="id" title="var">app</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="rev_app"><span class="id" title="lemma">rev_app</span></a> : <span class="id" title="keyword">∀</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>), <a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="Basics.html#l"><span class="id" title="variable">l</span></a> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="Basics.html#l'"><span class="id" title="variable">l'</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="Basics.html#l'"><span class="id" title="variable">l'</span></a> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <a class="idref" href="Basics.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="Basics.html#l"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">funelim</span> (<span class="id" title="var">l</span> <a class="idref" href="Basics.html#5d35a99a6abff1d64bf70538feb70e36"><span class="id" title="notation">++</span></a> <span class="id" title="var">l'</span>); <span class="id" title="var">simp</span> <span class="id" title="var">rev</span> <span class="id" title="var">app</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> (<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>, &lt;- <a class="idref" href="Basics.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="zip'"><span class="id" title="definition">zip'</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Basics.html#zip'"><span class="id" title="definition">zip'</span></a> <span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ;<br/>
<a class="idref" href="Basics.html#zip'"><span class="id" title="definition">zip'</span></a> <span class="id" title="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">b</span> <span class="id" title="var">w</span>) := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<a class="idref" href="Basics.html#zip'"><span class="id" title="definition">zip'</span></a> <span class="id" title="var">f</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span>) ;<br/>
<a class="idref" href="Basics.html#zip'"><span class="id" title="definition">zip'</span></a> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="zip''"><span class="id" title="definition">zip''</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">l</span> <span class="id" title="var">l'</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">def</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Basics.html#zip''"><span class="id" title="definition">zip''</span></a> <span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">def</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ;<br/>
<a class="idref" href="Basics.html#zip''"><span class="id" title="definition">zip''</span></a> <span class="id" title="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">b</span> <span class="id" title="var">w</span>) <span class="id" title="var">def</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) (<a class="idref" href="Basics.html#zip''"><span class="id" title="definition">zip''</span></a> <span class="id" title="var">f</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">def</span>) ;<br/>
<a class="idref" href="Basics.html#zip''"><span class="id" title="definition">zip''</span></a> <span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">b</span> <span class="id" title="var">w</span>) <span class="id" title="var">def</span> := <span class="id" title="var">def</span> ;<br/>
<a class="idref" href="Basics.html#zip''"><span class="id" title="definition">zip''</span></a> <span class="id" title="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">v</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">def</span> := <span class="id" title="var">def</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">Vector</span>.<br/>

<br/>
</div>

<div class="doc">
Vectors 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a name="vector_append_one"><span class="id" title="definition">vector_append_one</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">n</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) (<span class="id" title="var">a</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">A</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) :=<br/>
<a class="idref" href="Basics.html#vector_append_one"><span class="id" title="definition">vector_append_one</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">a</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a>;<br/>
<a class="idref" href="Basics.html#vector_append_one"><span class="id" title="definition">vector_append_one</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a'</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>) <span class="id" title="var">a</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a'</span> (<a class="idref" href="Basics.html#vector_append_one"><span class="id" title="definition">vector_append_one</span></a> <span class="id" title="var">v</span> <span class="id" title="var">a</span>).<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="vrev"><span class="id" title="definition">vrev</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">n</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span> :=<br/>
<a class="idref" href="Basics.html#vrev"><span class="id" title="definition">vrev</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a>;<br/>
<a class="idref" href="Basics.html#vrev"><span class="id" title="definition">vrev</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>) := <a class="idref" href="Basics.html#vector_append_one"><span class="id" title="definition">vector_append_one</span></a> (<a class="idref" href="Basics.html#vrev"><span class="id" title="definition">vrev</span></a> <span class="id" title="var">v</span>) <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="cast_vector"><span class="id" title="definition">cast_vector</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) (<span class="id" title="var">H</span> : <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">assumption</span>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span>(<span class="id" title="var">nocomp</span>) <a name="vrev_acc"><span class="id" title="definition">vrev_acc</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) (<span class="id" title="var">w</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">A</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">m</span>) :=<br/>
<a class="idref" href="Basics.html#vrev_acc"><span class="id" title="definition">vrev_acc</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">w</span> := <span class="id" title="var">w</span>;<br/>
<a class="idref" href="Basics.html#vrev_acc"><span class="id" title="definition">vrev_acc</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>) <span class="id" title="var">w</span> := <a class="idref" href="Basics.html#cast_vector"><span class="id" title="definition">cast_vector</span></a> (<a class="idref" href="Basics.html#vrev_acc"><span class="id" title="definition">vrev_acc</span></a> <span class="id" title="var">v</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">w</span>)) <span class="id" title="var">_</span>.<br/>
<span class="comment">(*&nbsp;About&nbsp;vapp'.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Record</span> <a name="vect"><span class="id" title="record">vect</span></a> {<span class="id" title="var">A</span>} := <a name="mkVect"><span class="id" title="constructor">mkVect</span></a> { <a name="vect_len"><span class="id" title="projection">vect_len</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>; <a name="vect_vector"><span class="id" title="projection">vect_vector</span></a> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#vect_len"><span class="id" title="method">vect_len</span></a> }.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="Basics.html#mkVect"><span class="id" title="constructor">mkVect</span></a> : <span class="id" title="var">vector</span> &gt;-&gt; <span class="id" title="var">vect</span>.<br/>
<span class="id" title="var">Derive</span> <span class="id" title="var">NoConfusion</span> <span class="id" title="keyword">for</span> <a class="idref" href="Basics.html#vect"><span class="id" title="record">vect</span></a>.<br/>

<br/>
</div>

<div class="doc">
Splitting a vector into two parts. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="Split"><span class="id" title="inductive">Split</span></a> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>}{<span class="id" title="var">m</span> <span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>} : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">X</span> (<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">n</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;<a name="append"><span class="id" title="constructor">append</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">(</span></a><span class="id" title="var">xs</span> : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">X</span> <span class="id" title="var">m</span>)(<span class="id" title="var">ys</span> : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">X</span> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">),</span></a> <a class="idref" href="Basics.html#Split"><span class="id" title="inductive">Split</span></a> (<a class="idref" href="Basics.html#vapp"><span class="id" title="definition">vapp</span></a> <a class="idref" href="Basics.html#xs"><span class="id" title="variable">xs</span></a> <a class="idref" href="Basics.html#ys"><span class="id" title="variable">ys</span></a>).<br/>

<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="Basics.html#Split"><span class="id" title="inductive">Split</span></a> [ <span class="id" title="var">X</span> ].<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">rec</span> ::= <span class="id" title="var">Subterm.rec_wf_eqns</span>.<br/>

<br/>
</div>

<div class="doc">
We split by well-founded recursion on the index <span class="inlinecode"><a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a></span> here. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a name="split"><span class="id" title="definition">split</span></a> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">m</span> <span class="id" title="var">n</span>} (<span class="id" title="var">xs</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#X"><span class="id" title="variable">X</span></a> (<a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)) : <a class="idref" href="Basics.html#Split"><span class="id" title="inductive">Split</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">xs</span> :=<br/>
<a class="idref" href="Basics.html#split"><span class="id" title="definition">split</span></a> {<span class="id" title="var">m</span>:=<span class="id" title="var">m</span>} <span class="id" title="var">xs</span> <span class="id" title="tactic">by</span> <span class="id" title="var">rec</span> <span class="id" title="var">m</span> :=<br/>
<a class="idref" href="Basics.html#split"><span class="id" title="definition">split</span></a> {<span class="id" title="var">m</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a>} <span class="id" title="var">xs</span> := <a class="idref" href="Basics.html#append"><span class="id" title="constructor">append</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">xs</span> ;<br/>
<a class="idref" href="Basics.html#split"><span class="id" title="definition">split</span></a> {<span class="id" title="var">m</span>:=(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>)} {<span class="id" title="var">n</span>:=<span class="id" title="var">n</span>} (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">x</span> ?(<span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">xs</span>) ≤ <a class="idref" href="Basics.html#split_comp_proj"><span class="id" title="definition">split</span></a> <span class="id" title="var">xs</span> ⇒ {<br/>
&nbsp;&nbsp;| <a class="idref" href="Basics.html#append"><span class="id" title="constructor">append</span></a> <span class="id" title="var">xs'</span> <span class="id" title="var">ys'</span> := <a class="idref" href="Basics.html#append"><span class="id" title="constructor">append</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">x</span> <span class="id" title="var">xs'</span>) <span class="id" title="var">ys'</span> }.<br/>

<br/>
</div>

<div class="doc">
The <span class="inlinecode"><span class="id" title="tactic">split</span></span> and <span class="inlinecode"><a class="idref" href="Basics.html#vapp"><span class="id" title="definition">vapp</span></a></span> functions are inverses. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="split_vapp"><span class="id" title="lemma">split_vapp</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">(</span></a><span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) <span class="id" title="var">m</span> <span class="id" title="var">n</span> (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) (<span class="id" title="var">w</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="Basics.html#append"><span class="id" title="constructor">append</span></a> <span class="id" title="var">v'</span> <span class="id" title="var">w'</span> := <a class="idref" href="Basics.html#split"><span class="id" title="definition">split</span></a> (<a class="idref" href="Basics.html#vapp"><span class="id" title="definition">vapp</span></a> <a class="idref" href="Basics.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Basics.html#w"><span class="id" title="variable">w</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Basics.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="Basics.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">w'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="Basics.html#vapp"><span class="id" title="definition">vapp</span></a> <span class="id" title="var">v</span> <span class="id" title="var">w</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="Basics.html#split"><span class="id" title="definition">split</span></a>. <span class="id" title="var">depelim</span> <span class="id" title="var">xs</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="tactic">split</span> <span class="id" title="keyword">in</span> ×. <span class="id" title="tactic">destruct</span> <a class="idref" href="Basics.html#split"><span class="id" title="definition">split</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Eval&nbsp;compute&nbsp;in&nbsp;@zip''.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Bool.Bvector.html#"><span class="id" title="library">Bvector</span></a>.<br/>

<br/>
</div>

<div class="doc">
This function can also be defined by structural recursion on <span class="inlinecode"><a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a name="split_struct"><span class="id" title="definition">split_struct</span></a> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">m</span> <span class="id" title="var">n</span>} (<span class="id" title="var">xs</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#X"><span class="id" title="variable">X</span></a> (<a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)) : <a class="idref" href="Basics.html#Split"><span class="id" title="inductive">Split</span></a> <span class="id" title="var">m</span> <span class="id" title="var">n</span> <span class="id" title="var">xs</span> :=<br/>
<a class="idref" href="Basics.html#split_struct"><span class="id" title="definition">split_struct</span></a> {<span class="id" title="var">m</span>:=0} <span class="id" title="var">xs</span> := <a class="idref" href="Basics.html#append"><span class="id" title="constructor">append</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">xs</span> ;<br/>
<a class="idref" href="Basics.html#split_struct"><span class="id" title="definition">split_struct</span></a> {<span class="id" title="var">m</span>:=(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>)} (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <span class="id" title="var">xs</span>) ≤ <a class="idref" href="Basics.html#split_struct"><span class="id" title="definition">split_struct</span></a> <span class="id" title="var">xs</span> ⇒ {<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#split_struct"><span class="id" title="definition">split_struct</span></a> {<span class="id" title="var">m</span>:=(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>)} (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">x</span> <span class="id" title="var">_</span> <span class="id" title="var">xs</span>) (<a class="idref" href="Basics.html#append"><span class="id" title="constructor">append</span></a> <span class="id" title="var">xs'</span> <span class="id" title="var">ys'</span>) := <a class="idref" href="Basics.html#append"><span class="id" title="constructor">append</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">x</span> <span class="id" title="var">xs'</span>) <span class="id" title="var">ys'</span> }.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="split_struct_vapp"><span class="id" title="lemma">split_struct_vapp</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">∀</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">(</span></a><span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>) <span class="id" title="var">m</span> <span class="id" title="var">n</span> (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) (<span class="id" title="var">w</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#X"><span class="id" title="variable">X</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="Basics.html#append"><span class="id" title="constructor">append</span></a> <span class="id" title="var">v'</span> <span class="id" title="var">w'</span> := <a class="idref" href="Basics.html#split_struct"><span class="id" title="definition">split_struct</span></a> (<a class="idref" href="Basics.html#vapp"><span class="id" title="definition">vapp</span></a> <a class="idref" href="Basics.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Basics.html#w"><span class="id" title="variable">w</span></a>) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Basics.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="Basics.html#w"><span class="id" title="variable">w</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">w'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">funelim</span> (<a class="idref" href="Basics.html#vapp"><span class="id" title="definition">vapp</span></a> <span class="id" title="var">v</span> <span class="id" title="var">w</span>); <span class="id" title="var">simp</span> <span class="id" title="var">split_struct</span> <span class="id" title="keyword">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Basics.html#split_struct"><span class="id" title="definition">split_struct</span></a> (<span class="id" title="var">m</span>:=0) <span class="id" title="var">w</span>). <span class="id" title="var">depelim</span> <span class="id" title="var">xs</span>; <span class="id" title="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Basics.html#split_struct"><span class="id" title="definition">split_struct</span></a> (<a class="idref" href="Basics.html#vapp"><span class="id" title="definition">vapp</span></a> <span class="id" title="var">t</span> <span class="id" title="var">w</span>)); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Taking the head of a non-empty vector. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a name="vhead"><span class="id" title="definition">vhead</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">n</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)) : <span class="id" title="var">A</span> := <br/>
<a class="idref" href="Basics.html#vhead"><span class="id" title="definition">vhead</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>) := <span class="id" title="var">a</span>.<br/>

<br/>
</div>

<div class="doc">
Mapping over a vector. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a name="vmap'"><span class="id" title="definition">vmap'</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#B"><span class="id" title="variable">B</span></a>) {<span class="id" title="var">n</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">B</span> <span class="id" title="var">n</span> :=<br/>
<a class="idref" href="Basics.html#vmap'"><span class="id" title="definition">vmap'</span></a> <span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> ;<br/>
<a class="idref" href="Basics.html#vmap'"><span class="id" title="definition">vmap'</span></a> <span class="id" title="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>) := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<a class="idref" href="Basics.html#vmap'"><span class="id" title="definition">vmap'</span></a> <span class="id" title="var">f</span> <span class="id" title="var">v</span>).<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">lt_n_Sn</span> : <span class="id" title="var">subterm_relation</span>.<br/>
<span class="id" title="keyword">Transparent</span> <a class="idref" href="Basics.html#vmap'"><span class="id" title="definition">vmap'</span></a>.<br/>

<br/>
</div>

<div class="doc">
The same, using well-founded recursion on <span class="inlinecode"><a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Equations</span> <a name="vmap"><span class="id" title="definition">vmap</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#B"><span class="id" title="variable">B</span></a>) {<span class="id" title="var">n</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">B</span> <span class="id" title="var">n</span> :=<br/>
<a class="idref" href="Basics.html#vmap"><span class="id" title="definition">vmap</span></a> <span class="id" title="var">f</span> {<span class="id" title="var">n</span>:=<span class="id" title="var">n</span>} <span class="id" title="var">v</span> <span class="id" title="tactic">by</span> <span class="id" title="var">rec</span> <span class="id" title="var">n</span> :=<br/>
<a class="idref" href="Basics.html#vmap"><span class="id" title="definition">vmap</span></a> <span class="id" title="var">f</span> {<span class="id" title="var">n</span>:=?(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a>)} <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> ;<br/>
<a class="idref" href="Basics.html#vmap"><span class="id" title="definition">vmap</span></a> <span class="id" title="var">f</span> {<span class="id" title="var">n</span>:=?(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)} (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>) := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<a class="idref" href="Basics.html#vmap_comp_proj"><span class="id" title="definition">vmap</span></a> <span class="id" title="var">f</span> <span class="id" title="var">v</span>).<br/>

<br/>
<span class="id" title="keyword">Transparent</span> <a class="idref" href="Basics.html#vmap"><span class="id" title="definition">vmap</span></a>.<br/>
<span class="id" title="keyword">Eval</span> <span class="id" title="tactic">compute</span> <span class="id" title="keyword">in</span> (<a class="idref" href="Basics.html#vmap'"><span class="id" title="definition">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)).<br/>
<span class="id" title="keyword">Eval</span> <span class="id" title="tactic">compute</span> <span class="id" title="keyword">in</span> (<a class="idref" href="Basics.html#vmap'"><span class="id" title="definition">vmap'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (@<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> 2 <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a>)).<br/>

<br/>
</div>

<div class="doc">
The image of a function. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="Image"><span class="id" title="section">Image</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">S</span> <span class="id" title="var">T</span> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a name="Image.f"><span class="id" title="variable">f</span></a> : <a class="idref" href="Basics.html#Image.S"><span class="id" title="variable">S</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#Image.T"><span class="id" title="variable">T</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="Imf"><span class="id" title="inductive">Imf</span></a> : <a class="idref" href="Basics.html#Image.T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> := <a name="imf"><span class="id" title="constructor">imf</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="Basics.html#Image.S"><span class="id" title="variable">S</span></a>) : <a class="idref" href="Basics.html#Imf"><span class="id" title="inductive">Imf</span></a> (<a class="idref" href="Basics.html#Image.f"><span class="id" title="variable">f</span></a> <a class="idref" href="Basics.html#s"><span class="id" title="variable">s</span></a>).<br/>

<br/>
</div>

<div class="doc">
Here <span class="inlinecode">(<a class="idref" href="Basics.html#Image.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="Basics.html#s"><span class="id" title="variable">s</span></a>)</span> is innaccessible. 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a name="inv"><span class="id" title="definition">inv</span></a> (<span class="id" title="var">t</span> : <a class="idref" href="Basics.html#Image.T"><span class="id" title="variable">T</span></a>) (<span class="id" title="var">im</span> : <a class="idref" href="Basics.html#Imf"><span class="id" title="inductive">Imf</span></a> <a class="idref" href="Basics.html#t"><span class="id" title="variable">t</span></a>) : <a class="idref" href="Basics.html#Image.S"><span class="id" title="variable">S</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#inv"><span class="id" title="definition">inv</span></a> ?(<a class="idref" href="Basics.html#Image.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">s</span>) (<a class="idref" href="Basics.html#imf"><span class="id" title="constructor">imf</span></a> <span class="id" title="var">s</span>) := <span class="id" title="var">s</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Basics.html#Image"><span class="id" title="section">Image</span></a>.<br/>

<br/>
</div>

<div class="doc">
Working with a universe of types with an interpretation function. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="Univ"><span class="id" title="section">Univ</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="univ"><span class="id" title="inductive">univ</span></a> : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;| <a name="ubool"><span class="id" title="constructor">ubool</span></a> | <a name="unat"><span class="id" title="constructor">unat</span></a> | <a name="uarrow"><span class="id" title="constructor">uarrow</span></a> (<span class="id" title="var">from</span>:<a class="idref" href="Basics.html#univ"><span class="id" title="inductive">univ</span></a>) (<span class="id" title="var">to</span>:<a class="idref" href="Basics.html#univ"><span class="id" title="inductive">univ</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a name="interp"><span class="id" title="definition">interp</span></a> (<span class="id" title="var">u</span> : <a class="idref" href="Basics.html#univ"><span class="id" title="inductive">univ</span></a>) : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#interp"><span class="id" title="definition">interp</span></a> <a class="idref" href="Basics.html#ubool"><span class="id" title="constructor">ubool</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>; <a class="idref" href="Basics.html#interp"><span class="id" title="definition">interp</span></a> <a class="idref" href="Basics.html#unat"><span class="id" title="constructor">unat</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#interp"><span class="id" title="definition">interp</span></a> (<a class="idref" href="Basics.html#uarrow"><span class="id" title="constructor">uarrow</span></a> <span class="id" title="var">from</span> <span class="id" title="var">to</span>) := <a class="idref" href="Basics.html#interp"><span class="id" title="definition">interp</span></a> <span class="id" title="var">from</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#interp"><span class="id" title="definition">interp</span></a> <span class="id" title="var">to</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="Basics.html#interp"><span class="id" title="definition">interp</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="interp'"><span class="id" title="definition">interp'</span></a> := <span class="id" title="keyword">Eval</span> <span class="id" title="tactic">compute</span> <span class="id" title="keyword">in</span> @<a class="idref" href="Basics.html#interp"><span class="id" title="definition">interp</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a name="foo"><span class="id" title="definition">foo</span></a> (<span class="id" title="var">u</span> : <a class="idref" href="Basics.html#univ"><span class="id" title="inductive">univ</span></a>) (<span class="id" title="var">el</span> : <a class="idref" href="Basics.html#interp'"><span class="id" title="definition">interp'</span></a> <a class="idref" href="Basics.html#u"><span class="id" title="variable">u</span></a>) : <a class="idref" href="Basics.html#interp'"><span class="id" title="definition">interp'</span></a> <span class="id" title="var">u</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#foo"><span class="id" title="definition">foo</span></a> <a class="idref" href="Basics.html#ubool"><span class="id" title="constructor">ubool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#foo"><span class="id" title="definition">foo</span></a> <a class="idref" href="Basics.html#ubool"><span class="id" title="constructor">ubool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#foo"><span class="id" title="definition">foo</span></a> <a class="idref" href="Basics.html#unat"><span class="id" title="constructor">unat</span></a> <span class="id" title="var">t</span> := <span class="id" title="var">t</span> ;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#foo"><span class="id" title="definition">foo</span></a> (<a class="idref" href="Basics.html#uarrow"><span class="id" title="constructor">uarrow</span></a> <span class="id" title="var">from</span> <span class="id" title="var">to</span>) <span class="id" title="var">f</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Program.Basics.html#23b053569700a43fa034e3971fb6ded6"><span class="id" title="notation">∘</span></a> <span class="id" title="var">f</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="Basics.html#foo"><span class="id" title="definition">foo</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Eval&nbsp;lazy&nbsp;beta&nbsp;delta&nbsp;<span class="inlinecode"></span> <span class="inlinecode"><span class="id" title="var">foo</span></span> <span class="inlinecode"><span class="id" title="var">foo_obligation_1</span></span> <span class="inlinecode"><span class="id" title="var">foo_obligation_2</span></span> <span class="inlinecode"></span>&nbsp;iota&nbsp;zeta&nbsp;in&nbsp;foo.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Basics.html#Univ"><span class="id" title="section">Univ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">generalize_by_eqs</span> <span class="id" title="var">id</span> ::= <span class="id" title="tactic">generalize_eqs</span> <span class="id" title="var">id</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">generalize_by_eqs_vars</span> <span class="id" title="var">id</span> ::= <span class="id" title="tactic">generalize_eqs_vars</span> <span class="id" title="var">id</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span>(<span class="id" title="var">nocomp</span>) <a name="vlast'"><span class="id" title="definition">vlast'</span></a> {<span class="id" title="var">A</span>} {<span class="id" title="var">n</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)) : <span class="id" title="var">A</span> :=<br/>
<a class="idref" href="Basics.html#vlast'"><span class="id" title="definition">vlast'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> <span class="id" title="var">Vnil</span>) := <span class="id" title="var">a</span> ;<br/>
<a class="idref" href="Basics.html#vlast'"><span class="id" title="definition">vlast'</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">v</span>) := <a class="idref" href="Basics.html#vlast'"><span class="id" title="definition">vlast'</span></a> <span class="id" title="var">v</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">DepElimDec</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">generalize_by_eqs</span> <span class="id" title="var">id</span> ::= <span class="id" title="var">generalize_eqs_sig</span> <span class="id" title="var">id</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">generalize_by_eqs_vars</span> <span class="id" title="var">id</span> ::= <span class="id" title="var">generalize_eqs_vars_sig</span> <span class="id" title="var">id</span>.<br/>

<br/>
</div>

<div class="doc">
The parity predicate embeds a divisor of n or n-1 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <a name="Parity"><span class="id" title="inductive">Parity</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Set</span> :=<br/>
| <a name="even"><span class="id" title="constructor">even</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <a class="idref" href="Basics.html#Parity"><span class="id" title="inductive">Parity</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#mult"><span class="id" title="abbreviation">mult</span></a> 2 <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)<br/>
| <a name="odd"><span class="id" title="constructor">odd</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <a class="idref" href="Basics.html#Parity"><span class="id" title="inductive">Parity</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#mult"><span class="id" title="abbreviation">mult</span></a> 2 <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)).<br/>

<br/>
<span class="comment">(*&nbsp;Eval&nbsp;compute&nbsp;in&nbsp;(fun&nbsp;n&nbsp;=&gt;&nbsp;mult&nbsp;2&nbsp;(S&nbsp;n)).&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="cast"><span class="id" title="definition">cast</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">a</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">p</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#B"><span class="id" title="variable">B</span></a>) : <a class="idref" href="Basics.html#B"><span class="id" title="variable">B</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">a</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="parity"><span class="id" title="definition">parity</span></a> (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="Basics.html#Parity"><span class="id" title="inductive">Parity</span></a> <span class="id" title="var">n</span> :=<br/>
<a class="idref" href="Basics.html#parity"><span class="id" title="definition">parity</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> := <a class="idref" href="Basics.html#even"><span class="id" title="constructor">even</span></a> 0 ;<br/>
<a class="idref" href="Basics.html#parity"><span class="id" title="definition">parity</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) ≤ <a class="idref" href="Basics.html#parity"><span class="id" title="definition">parity</span></a> <span class="id" title="var">n</span> ⇒ {<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#parity"><span class="id" title="definition">parity</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> ?(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#mult"><span class="id" title="abbreviation">mult</span></a> 2 <span class="id" title="var">k</span>))     (<a class="idref" href="Basics.html#even"><span class="id" title="constructor">even</span></a> <span class="id" title="var">k</span>) := <a class="idref" href="Basics.html#odd"><span class="id" title="constructor">odd</span></a> <span class="id" title="var">k</span> ;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#parity"><span class="id" title="definition">parity</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> ?(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#mult"><span class="id" title="abbreviation">mult</span></a> 2 <span class="id" title="var">k</span>))) (<a class="idref" href="Basics.html#odd"><span class="id" title="constructor">odd</span></a> <span class="id" title="var">k</span>)  := <a class="idref" href="Basics.html#cast"><span class="id" title="definition">cast</span></a> (<a class="idref" href="Basics.html#even"><span class="id" title="constructor">even</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span>)) <span class="id" title="var">_</span> }.<br/>

<br/>
</div>

<div class="doc">
We can halve a natural looking at its parity and using the lower truncation. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Equations</span> <a name="half"><span class="id" title="definition">half</span></a> (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
<a class="idref" href="Basics.html#half"><span class="id" title="definition">half</span></a> <span class="id" title="var">n</span> ≤ <a class="idref" href="Basics.html#parity"><span class="id" title="definition">parity</span></a> <span class="id" title="var">n</span> ⇒ {<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#half"><span class="id" title="definition">half</span></a> ?(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#mult"><span class="id" title="abbreviation">mult</span></a> 2 <span class="id" title="var">k</span>)) (<a class="idref" href="Basics.html#odd"><span class="id" title="constructor">odd</span></a> <span class="id" title="var">k</span>) := <span class="id" title="var">k</span> ;<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#half"><span class="id" title="definition">half</span></a> ?(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#mult"><span class="id" title="abbreviation">mult</span></a> 2 <span class="id" title="var">k</span>) (<a class="idref" href="Basics.html#even"><span class="id" title="constructor">even</span></a> <span class="id" title="var">k</span>) := <span class="id" title="var">k</span> }.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="vtail"><span class="id" title="definition">vtail</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">n</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)) : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span> :=<br/>
<a class="idref" href="Basics.html#vtail"><span class="id" title="definition">vtail</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">v'</span>) := <span class="id" title="var">v'</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">generalize_by_eqs</span> <span class="id" title="var">id</span> ::= <span class="id" title="tactic">generalize_eqs</span> <span class="id" title="var">id</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">generalize_by_eqs_vars</span> <span class="id" title="var">id</span> ::= <span class="id" title="tactic">generalize_eqs_vars</span> <span class="id" title="var">id</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span>(<span class="id" title="var">nocomp</span>) <a name="diag"><span class="id" title="definition">diag</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">n</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> (<span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span> :=<br/>
<a class="idref" href="Basics.html#diag"><span class="id" title="definition">diag</span></a> {<span class="id" title="var">n</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a>} <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> ;<br/>
<a class="idref" href="Basics.html#diag"><span class="id" title="definition">diag</span></a> {<span class="id" title="var">n</span>:=(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> ?(<span class="id" title="var">n</span>))} (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>) <span class="id" title="var">_</span> <span class="id" title="var">v'</span>) := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> (<a class="idref" href="Basics.html#diag"><span class="id" title="definition">diag</span></a> (<a class="idref" href="Basics.html#vmap"><span class="id" title="definition">vmap</span></a> <a class="idref" href="Basics.html#vtail"><span class="id" title="definition">vtail</span></a> <span class="id" title="var">v'</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="mat"><span class="id" title="definition">mat</span></a> <span class="id" title="var">A</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span> := <span class="id" title="abbreviation">vector</span> (<span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="vmake"><span class="id" title="definition">vmake</span></a> {<span class="id" title="var">A</span>} (<span class="id" title="var">n</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">a</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a>) : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span> :=<br/>
<a class="idref" href="Basics.html#vmake"><span class="id" title="definition">vmake</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#O"><span class="id" title="constructor">O</span></a> <span class="id" title="var">a</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> ;<br/>
<a class="idref" href="Basics.html#vmake"><span class="id" title="definition">vmake</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">a</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> (<a class="idref" href="Basics.html#vmake"><span class="id" title="definition">vmake</span></a> <span class="id" title="var">n</span> <span class="id" title="var">a</span>).<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="vfold_right"><span class="id" title="definition">vfold_right</span></a> {<span class="id" title="var">A</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">∀</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#669c7d28e8f98524b0cbba08d17d0eec"><span class="id" title="notation">,</span></a> <a class="idref" href="Basics.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>)) (<span class="id" title="var">e</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> 0) {<span class="id" title="var">n</span>} (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) : <span class="id" title="var">A</span> <span class="id" title="var">n</span> :=<br/>
<a class="idref" href="Basics.html#vfold_right"><span class="id" title="definition">vfold_right</span></a> <span class="id" title="var">f</span> <span class="id" title="var">e</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> := <span class="id" title="var">e</span> ;<br/>
<a class="idref" href="Basics.html#vfold_right"><span class="id" title="definition">vfold_right</span></a> <span class="id" title="var">f</span> <span class="id" title="var">e</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">n</span> <span class="id" title="var">v</span>) := <span class="id" title="var">f</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span> (<a class="idref" href="Basics.html#vfold_right"><span class="id" title="definition">vfold_right</span></a> <span class="id" title="var">f</span> <span class="id" title="var">e</span> <span class="id" title="var">v</span>).<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="vzip"><span class="id" title="definition">vzip</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">n</span>} (<span class="id" title="var">f</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#C"><span class="id" title="variable">C</span></a>) (<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) (<span class="id" title="var">w</span> : <span class="id" title="abbreviation">vector</span> <a class="idref" href="Basics.html#B"><span class="id" title="variable">B</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">C</span> <span class="id" title="var">n</span> :=<br/>
<a class="idref" href="Basics.html#vzip"><span class="id" title="definition">vzip</span></a> <span class="id" title="var">f</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a> ;<br/>
<a class="idref" href="Basics.html#vzip"><span class="id" title="definition">vzip</span></a> <span class="id" title="var">f</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span>) (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">a'</span> <span class="id" title="var">n</span> <span class="id" title="var">v'</span>) := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">a'</span>) (<a class="idref" href="Basics.html#vzip"><span class="id" title="definition">vzip</span></a> <span class="id" title="var">f</span> <span class="id" title="var">v</span> <span class="id" title="var">v'</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="transpose"><span class="id" title="definition">transpose</span></a> {<span class="id" title="var">A</span> <span class="id" title="var">m</span> <span class="id" title="var">n</span>} : <a class="idref" href="Basics.html#mat"><span class="id" title="definition">mat</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Basics.html#mat"><span class="id" title="definition">mat</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="Basics.html#vfold_right"><span class="id" title="definition">vfold_right</span></a> (<span class="id" title="var">A</span>:=<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#e347aba07034a66189f14f85f0430e87"><span class="id" title="notation">λ</span></a> <span class="id" title="var">m</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#e347aba07034a66189f14f85f0430e87"><span class="id" title="notation">,</span></a> <a class="idref" href="Basics.html#mat"><span class="id" title="definition">mat</span></a> <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Basics.html#m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#e347aba07034a66189f14f85f0430e87"><span class="id" title="notation">λ</span></a> <span class="id" title="var">m'</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#e347aba07034a66189f14f85f0430e87"><span class="id" title="notation">,</span></a> <a class="idref" href="Basics.html#vzip"><span class="id" title="definition">vzip</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#e347aba07034a66189f14f85f0430e87"><span class="id" title="notation">λ</span></a> <span class="id" title="var">a</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Unicode.Utf8_core.html#e347aba07034a66189f14f85f0430e87"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="Basics.html#a"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;(<a class="idref" href="Basics.html#vmake"><span class="id" title="definition">vmake</span></a> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Vectors.Vector.html#nil"><span class="id" title="constructor">nil</span></a>).<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations.Fin</span>.<br/>

<br/>
<span class="id" title="keyword">Generalizable</span> <span class="id" title="keyword">All</span> <span class="id" title="keyword">Variables</span>.<br/>

<br/>
<span class="id" title="keyword">Opaque</span> <a class="idref" href="Basics.html#vmap"><span class="id" title="definition">vmap</span></a>. <span class="id" title="keyword">Opaque</span> <a class="idref" href="Basics.html#vtail"><span class="id" title="definition">vtail</span></a>. <span class="id" title="keyword">Opaque</span> <span class="id" title="definition">nth</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="nth_vmap"><span class="id" title="lemma">nth_vmap</span></a> `(<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span>) `(<span class="id" title="var">fn</span> : <a class="idref" href="Basics.html#A"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="var">B</span>) (<span class="id" title="var">f</span> : <span class="id" title="inductive">fin</span> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) : <span class="id" title="definition">nth</span> (<a class="idref" href="Basics.html#vmap"><span class="id" title="definition">vmap</span></a> <a class="idref" href="Basics.html#fn"><span class="id" title="variable">fn</span></a> <a class="idref" href="Basics.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Basics.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Basics.html#fn"><span class="id" title="variable">fn</span></a> (<span class="id" title="definition">nth</span> <a class="idref" href="Basics.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Basics.html#f"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">revert</span> <span class="id" title="var">B</span> <span class="id" title="var">fn</span>. <span class="id" title="var">funelim</span> (<span class="id" title="definition">nth</span> <span class="id" title="var">v</span> <span class="id" title="var">f</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">simp</span> <span class="id" title="var">nth</span> <span class="id" title="var">vmap</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="nth_vtail"><span class="id" title="lemma">nth_vtail</span></a> `(<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> <span class="id" title="var">A</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)) (<span class="id" title="var">f</span> : <span class="id" title="inductive">fin</span> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) : <span class="id" title="definition">nth</span> (<a class="idref" href="Basics.html#vtail"><span class="id" title="definition">vtail</span></a> <a class="idref" href="Basics.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Basics.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">nth</span> <a class="idref" href="Basics.html#v"><span class="id" title="variable">v</span></a> (<span class="id" title="constructor">fs</span> <a class="idref" href="Basics.html#f"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">funelim</span> (<a class="idref" href="Basics.html#vtail"><span class="id" title="definition">vtail</span></a> <span class="id" title="var">v</span>); <span class="id" title="tactic">intros</span>; <span class="id" title="var">simp</span> <span class="id" title="var">nth</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Hint Rewrite</span> @<a class="idref" href="Basics.html#nth_vmap"><span class="id" title="lemma">nth_vmap</span></a> @<a class="idref" href="Basics.html#nth_vtail"><span class="id" title="lemma">nth_vtail</span></a> : <span class="id" title="var">nth</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="diag_nth"><span class="id" title="lemma">diag_nth</span></a> `(<span class="id" title="var">v</span> : <span class="id" title="abbreviation">vector</span> (<span class="id" title="abbreviation">vector</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span>) <span class="id" title="var">n</span>) (<span class="id" title="var">f</span> : <span class="id" title="inductive">fin</span> <a class="idref" href="Basics.html#n"><span class="id" title="variable">n</span></a>) : <span class="id" title="definition">nth</span> (<a class="idref" href="Basics.html#diag"><span class="id" title="definition">diag</span></a> <a class="idref" href="Basics.html#v"><span class="id" title="variable">v</span></a>) <a class="idref" href="Basics.html#f"><span class="id" title="variable">f</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">nth</span> (<span class="id" title="definition">nth</span> <a class="idref" href="Basics.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Basics.html#f"><span class="id" title="variable">f</span></a>) <a class="idref" href="Basics.html#f"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">revert</span> <span class="id" title="var">f</span>. <span class="id" title="var">funelim</span> (<a class="idref" href="Basics.html#diag"><span class="id" title="definition">diag</span></a> <span class="id" title="var">v</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">f</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">f</span>; <span class="id" title="var">simp</span> <span class="id" title="var">nth</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">simp</span> <span class="id" title="var">nth</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a name="assoc"><span class="id" title="definition">assoc</span></a> (<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">z</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> :=<br/>
<a class="idref" href="Basics.html#assoc"><span class="id" title="definition">assoc</span></a> 0 <span class="id" title="var">y</span> <span class="id" title="var">z</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>;<br/>
<a class="idref" href="Basics.html#assoc"><span class="id" title="definition">assoc</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">y</span> <span class="id" title="var">z</span> ≤ <a class="idref" href="Basics.html#assoc"><span class="id" title="definition">assoc</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>, <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">(</span></a><span class="id" title="var">y</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">+</span></a> <span class="id" title="var">z</span><a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Peano.html#b3eea360671e1b32b18a26e15b3aace3"><span class="id" title="notation">)</span></a> ⇒ {<br/>
<a class="idref" href="Basics.html#assoc"><span class="id" title="definition">assoc</span></a> (<a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">x</span>) <span class="id" title="var">y</span> <span class="id" title="var">z</span> <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">_</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.6/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> }.<br/>
</div>
<hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>